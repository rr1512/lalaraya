import{cm as W,cn as S,co as X,cp as Y,cq as Z,r as O,cr as K,bN as b,e as x,am as B,j as I,cc as j,v as ee,a as R,ag as te,b as T,t as L,d as $,g as re,q as C,s as ne}from"./main-eb4aecd5.js";import{r as ie,f as U,B as se,c as ae,a as ue}from"./blank-page-skeleton-3a415e55.js";var ce=class extends W{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:S()},t)}getOptimisticResult(e){return e.behavior=S(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){var o,p,P,y;const{state:r}=e,i=super.createResult(e,t),{isFetching:n,isRefetching:s}=i,c=n&&((p=(o=r.fetchMeta)==null?void 0:o.fetchMore)==null?void 0:p.direction)==="forward",u=n&&((y=(P=r.fetchMeta)==null?void 0:P.fetchMore)==null?void 0:y.direction)==="backward";return{...i,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:X(t,r.data),hasPreviousPage:Y(t,r.data),isFetchingNextPage:c,isFetchingPreviousPage:u,isRefetching:s&&!c&&!u}}};function oe(e,t){return Z(e,ce,t)}function fe(e){return"next_cursor"in e?e.next_cursor!=null:"last_page"in e?e.current_page<e.last_page:e.data.length>0&&e.data.length>=e.per_page}function le({queryKey:e,defaultOrderDir:t,defaultOrderBy:r,queryParams:i},n,s=""){return n.orderBy||(n.orderBy=r),n.orderDir||(n.orderDir=t),[...e,n,s,i]}function pe(e){var F,D,Q,q;const{initialPage:t,endpoint:r,defaultOrderBy:i,defaultOrderDir:n,queryParams:s,paginate:c,transformResponse:u,willSortOrFilter:o=!1}=e,[p,P]=O.useState(""),[y,H]=O.useState({orderBy:i,orderDir:n}),k=le(e,y,p),J=O.useRef(K(k)).current,h=oe({placeholderData:o?b:void 0,queryKey:k,queryFn:({pageParam:l,signal:E})=>{const M={...s,perPage:(t==null?void 0:t.per_page)||(s==null?void 0:s.perPage),query:(s==null?void 0:s.query)??p,paginate:c,...y};return c==="cursor"?M.cursor=l:M.page=l||1,he(r,M,u,E)},initialPageParam:c==="cursor"?"":1,getNextPageParam:l=>fe(l.pagination)?"next_cursor"in l.pagination?l.pagination.next_cursor:l.pagination.current_page+1:null,initialData:()=>{if(!(!t||K(k)!==J))return{pageParams:[void 0,1],pages:[{pagination:t}]}}}),V=O.useMemo(()=>{var l;return((l=h.data)==null?void 0:l.pages.flatMap(E=>E.pagination.data))||[]},[(F=h.data)==null?void 0:F.pages]),m=(D=h.data)==null?void 0:D.pages[0].pagination,G=m&&"total"in m&&m.total?m.total:null;return{...h,items:V,totalItems:G,noResults:((q=(Q=h.data)==null?void 0:Q.pages)==null?void 0:q[0].pagination.data.length)===0,isReloading:h.isFetching&&!h.isFetchingNextPage&&h.isPlaceholderData,sortDescriptor:y,setSortDescriptor:H,searchQuery:p,setSearchQuery:P}}async function he(e,t,r,i){return t.query&&await new Promise(n=>setTimeout(n,300)),x.get(e,{params:t,signal:t.query?i:void 0}).then(n=>r?r(n.data):n.data)}const ke=B(I.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVertOutlined"),Ee=""+new URL("website-builder-2fb98cdd.svg",import.meta.url).href,Me=B(I.jsx("path",{d:"M12 5.83 15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9 12 5.83zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15 12 18.17z"}),"UnfoldMoreOutlined");function d(e,t){var r,i;if(typeof t=="function")i=t(e),i!==void 0&&(e=i);else if(Array.isArray(t))for(r=0;r<t.length;r++)i=t[r](e),i!==void 0&&(e=i);return e}function de(e,t){return e[0]==="-"&&Array.isArray(t)&&/^-\d+$/.test(e)?t.length+parseInt(e,10):e}function ye(e){return/^\d+$/.test(e)}function A(e){return Object.prototype.toString.call(e)==="[object Object]"}function v(e){return Object(e)===e}function w(e){return Object.keys(e).length===0}var ge=["__proto__","prototype","constructor"],ve=function(e){return ge.indexOf(e)===-1};function _(e,t){e.indexOf("[")>=0&&(e=e.replace(/\[/g,t).replace(/]/g,""));var r=e.split(t),i=r.filter(ve);if(i.length!==r.length)throw Error("Refusing to update blacklisted property "+e);return r}var N=Object.prototype.hasOwnProperty;function a(e,t,r,i){if(!(this instanceof a))return new a(e,t,r,i);typeof t>"u"&&(t=!1),typeof r>"u"&&(r=!0),typeof i>"u"&&(i=!0),this.separator=e||".",this.override=t,this.useArray=r,this.useBrackets=i,this.keepArray=!1,this.cleanup=[]}var g=new a(".",!1,!0,!0);function f(e){return function(){return g[e].apply(g,arguments)}}a.prototype._fill=function(e,t,r,i){var n=e.shift();if(e.length>0){if(t[n]=t[n]||(this.useArray&&ye(e[0])?[]:{}),!v(t[n]))if(this.override)t[n]={};else{if(!(v(r)&&w(r)))throw new Error("Trying to redefine `"+n+"` which is a "+typeof t[n]);return}this._fill(e,t[n],r,i)}else{if(!this.override&&v(t[n])&&!w(t[n])){if(!(v(r)&&w(r)))throw new Error("Trying to redefine non-empty obj['"+n+"']");return}t[n]=d(r,i)}};a.prototype.object=function(e,t){var r=this;return Object.keys(e).forEach(function(i){var n=t===void 0?null:t[i],s=_(i,r.separator).join(r.separator);s.indexOf(r.separator)!==-1?(r._fill(s.split(r.separator),e,e[i],n),delete e[i]):e[i]=d(e[i],n)}),e};a.prototype.str=function(e,t,r,i){var n=_(e,this.separator).join(this.separator);return e.indexOf(this.separator)!==-1?this._fill(n.split(this.separator),r,t,i):r[e]=d(t,i),r};a.prototype.pick=function(e,t,r,i){var n,s,c,u,o;for(s=_(e,this.separator),n=0;n<s.length;n++)if(u=de(s[n],t),t&&typeof t=="object"&&u in t){if(n===s.length-1)return r?(c=t[u],i&&Array.isArray(t)?t.splice(u,1):delete t[u],Array.isArray(t)&&(o=s.slice(0,-1).join("."),this.cleanup.indexOf(o)===-1&&this.cleanup.push(o)),c):t[u];t=t[u]}else return;return r&&Array.isArray(t)&&(t=t.filter(function(p){return p!==void 0})),t};a.prototype.delete=function(e,t){return this.remove(e,t,!0)};a.prototype.remove=function(e,t,r){var i;if(this.cleanup=[],Array.isArray(e)){for(i=0;i<e.length;i++)this.pick(e[i],t,!0,r);return r||this._cleanup(t),t}else return this.pick(e,t,!0,r)};a.prototype._cleanup=function(e){var t,r,i,n;if(this.cleanup.length){for(r=0;r<this.cleanup.length;r++)i=this.cleanup[r].split("."),n=i.splice(0,-1).join("."),t=n?this.pick(n,e):e,t=t[i[0]].filter(function(s){return s!==void 0}),this.set(this.cleanup[r],t,e);this.cleanup=[]}};a.prototype.del=a.prototype.remove;a.prototype.move=function(e,t,r,i,n){return typeof i=="function"||Array.isArray(i)?this.set(t,d(this.pick(e,r,!0),i),r,n):(n=i,this.set(t,this.pick(e,r,!0),r,n)),r};a.prototype.transfer=function(e,t,r,i,n,s){return typeof n=="function"||Array.isArray(n)?this.set(t,d(this.pick(e,r,!0),n),i,s):(s=n,this.set(t,this.pick(e,r,!0),i,s)),i};a.prototype.copy=function(e,t,r,i,n,s){return typeof n=="function"||Array.isArray(n)?this.set(t,d(JSON.parse(JSON.stringify(this.pick(e,r,!1))),n),i,s):(s=n,this.set(t,this.pick(e,r,!1),i,s)),i};a.prototype.set=function(e,t,r,i){var n,s,c,u;if(typeof t>"u")return r;for(c=_(e,this.separator),n=0;n<c.length;n++){if(u=c[n],n===c.length-1)if(i&&A(t)&&A(r[u]))for(s in t)N.call(t,s)&&(r[u][s]=t[s]);else if(i&&Array.isArray(r[u])&&Array.isArray(t))for(var o=0;o<t.length;o++)r[c[n]].push(t[o]);else r[u]=t;else(!N.call(r,u)||!A(r[u])&&!Array.isArray(r[u]))&&(/^\d+$/.test(c[n+1])?r[u]=[]:r[u]={});r=r[u]}return r};a.prototype.transform=function(e,t,r){return t=t||{},r=r||{},Object.keys(e).forEach((function(i){this.set(e[i],this.pick(i,t),r)}).bind(this)),r};a.prototype.dot=function(e,t,r){t=t||{},r=r||[];var i=Array.isArray(e);return Object.keys(e).forEach((function(n){var s=i&&this.useBrackets?"["+n+"]":n;if(v(e[n])&&(A(e[n])&&!w(e[n])||Array.isArray(e[n])&&!this.keepArray&&e[n].length!==0))if(i&&this.useBrackets){var c=r[r.length-1]||"";return this.dot(e[n],t,r.slice(0,-1).concat(c+s))}else return this.dot(e[n],t,r.concat(s));else i&&this.useBrackets?t[r.join(this.separator).concat("["+n+"]")]=e[n]:t[r.concat(s).join(this.separator)]=e[n]}).bind(this)),t};a.pick=f("pick");a.move=f("move");a.transfer=f("transfer");a.transform=f("transform");a.copy=f("copy");a.object=f("object");a.str=f("str");a.set=f("set");a.delete=f("delete");a.del=a.remove=f("remove");a.dot=f("dot");["override","overwrite"].forEach(function(e){Object.defineProperty(a,e,{get:function(){return g.override},set:function(t){g.override=!!t}})});["useArray","keepArray","useBrackets"].forEach(function(e){Object.defineProperty(a,e,{get:function(){return g[e]},set:function(t){g[e]=t}})});a._process=d;var Pe=a;const Fe=j(Pe);function De(e){return pe({queryKey:["templates",e],endpoint:"templates",paginate:"simple",willSortOrFilter:!0,queryParams:e})}function Qe(e,t=!1){return ee({queryKey:["templates",`${e}`,t],queryFn:()=>z(e)})}function z(e,t=!1){return x.get(`templates/${e}`,{params:{loadPages:t}}).then(r=>r.data)}function qe(e){const{trans:t}=R(),r=te();return T({mutationFn:i=>me(i),onSuccess:async()=>{ie(),await r.invalidateQueries({queryKey:["projects"]}),L(t($("Site created")))},onError:i=>re(i,e)})}async function me({name:e,templateName:t,userId:r,published:i}){const n={name:e,templateName:t,pages:[],userId:r,published:i};if(t)try{const s=await C.fetchQuery({queryKey:["templates",t,!0],queryFn:()=>z(t,!0)});n.pages=Ae(s.template)}catch(s){return Promise.reject(s)}else n.pages=Oe();return x.post("projects",n).then(s=>s.data)}function Oe(){return[{name:"index",html:U(se)}]}function Ae(e){return e.pages.map(t=>({name:t.name,html:U(t.html,e)}))}const Se=""+new URL("world-ea41c34b.svg",import.meta.url).href;function Ke(){const{trans:e}=R();return T({mutationFn:t=>we(t),onSuccess:(t,r)=>{L.positive(e($("“:domain” removed",{values:{domain:ae(r.domain.host)}}))),C.invalidateQueries({queryKey:ue("custom-domain")})},onError:t=>ne(t)})}function we({domain:e}){return x.delete(`custom-domain/${e.id}`).then(t=>t.data)}export{ke as M,Me as U,qe as a,Ee as b,De as c,Fe as d,Ke as e,Qe as f,fe as h,pe as u,Se as w};
//# sourceMappingURL=use-delete-domain-13d4065a.js.map
